var o=Object.defineProperty;var c=(n,i,a)=>i in n?o(n,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[i]=a;var l=(n,i,a)=>(c(n,typeof i!="symbol"?i+"":i,a),a);(function(n,i){typeof exports=="object"&&typeof module!="undefined"?i(exports):typeof define=="function"&&define.amd?define(["exports"],i):(n=typeof globalThis!="undefined"?globalThis:n||self,i(n.WrapperLib={}))})(this,function(n){"use strict";class i{constructor(e,t,r){l(this,"element");l(this,"subscribers");if(this.subscribers=[],t?this.element=t:this.element=document.createElement(e),this.element.tagName==="INPUT"&&this.onEvent("input",this.notifySubscribers.bind(this)),this.element.tagName==="SELECT"&&this.onEvent("change",this.notifySubscribers.bind(this)),this.element.tagName==="TEXTAREA"&&this.onEvent("input",this.notifySubscribers.bind(this)),r){if(r.id&&(this.element.id=r.id),r.name&&this.element.setAttribute("name",r.name),r.value)if(this.element.hasOwnProperty("value"))this.element.value=r.value;else throw new Error("attempted to set value on a tag that doesn't support that");if(r.text!=null&&(this.element.innerText=r.text),r.html!=null&&(this.element.innerHTML=r.html),r.style&&this.element.setAttribute("style",r.style),r.bind){let s={bindFeature:r.bind.bindFeature,toFeature:r.bind.toFeature,ofWrapper:this,xferFunc:r.bind.xferFunc};r.bind.ofWrapper.addSubscriber(s)}}}static wrap(e,t){return new i(e.tagName,e,t)}newWrap(e,t,r="inside"){let s=new i(e,void 0,t);return r==="inside"&&this.element.appendChild(s.element),r==="after"&&this.element.after(s.element),r==="before"&&this.element.before(s.element),s}bindTo(e,t,r){if(r!=null)e.addSubscriber(this,r);else{if(t==null)throw new Error("No bound feature or xferFunc included.");t=="text"&&e.addSubscriber(this,s=>this.text(s)),t=="value"&&e.addSubscriber(this,s=>this.setVal(s)),t=="style"&&e.addSubscriber(this,s=>this.style(s))}}bindToWrapper(e,t,r,s){let h={bindFeature:t,toFeature:r,ofWrapper:this,xferFunc:s};e.addSubscriber(h);let u=e.getText();return h.bindFeature==="style"&&e.getStyle()!=null&&(u=e.getStyle()),h.bindFeature==="value"&&(u=e.getVal().toString()),this.handleChange(u,h),this}notifySubscribers(){return this.subscribers.forEach(e=>{let t=this.getText();e.bindFeature=="value"&&(t=this.getVal().toString()),e.bindFeature=="style"&&(t=this.getStyle()),e.ofWrapper.handleChange(t,e)}),this}handleChange(e,t){typeof t=="function"?t(e):t.xferFunc?t.xferFunc(e):(t.toFeature==="text"&&this.text(e),t.toFeature==="style"&&this.style(e),t.toFeature==="value"&&this.setVal(e))}addSubscriber(e){return this.subscribers.push(e),this}removeSubscriber(e){return this.subscribers=this.subscribers.filter(t=>t.ofWrapper!=e),this}purgeSubscribers(){return this.subscribers=[],this}text(e){return this.element.innerText=e,this.subscribers.forEach(t=>{t.bindFeature=="text"&&t.ofWrapper.handleChange(e,t)}),this}attr(e,t){return this.element.setAttribute(e,t),this}html(e){return this.element.innerHTML=e,this}style(e,t){let r="";return t&&this.element.getAttribute("style")!=null&&(r=this.element.getAttribute("style").trim(),r.charAt(r.length-1)!=";"&&(r=r+"; ")),this.element.setAttribute("style",r+e),this.subscribers.forEach(s=>{s.bindFeature==="style"&&s.ofWrapper.handleChange(e,s)}),this}name(e){return this.element.setAttribute("name",e),this}placehold(e){return this.element.setAttribute("placeholder",e),this}getAttr(e){return this.element.getAttribute(e)}setAttr(e,t){return this.attr(e,t)}getStyle(){return this.element.getAttribute("style")}setStyle(e){return this.style(e)}getText(){return this.element.innerText}setText(e){return this.text(e)}getVal(){return this.element.tagName=="INPUT"&&this.getAttr("type")=="checkbox"?this.element.checked:this.element.value}setVal(e){return this.element.value=e,this.subscribers.forEach(t=>{t.bindFeature==="value"&&t.ofWrapper.handleChange(e,t)}),this}getData(e){return this.element.dataset[e]}setData(e,t){return this.element.setAttribute("data-"+e,t),this}onEvent(e,t){return this.element.addEventListener(e,r=>t(r)),this}onClick(e){return this.onEvent("click",e),this}onInput(e){return this.onEvent("input",e),this}onChange(e){return this.onEvent("change",e),this}listContent(e,t){if(this.element.tagName!="UL"&&this.element.tagName!="OL")throw console.error({"Not a list container->:":this.element}),new Error('List Content must be appended to a "ul" or "ol"');if(t){if(e.length!=t.length)throw console.error({"not the same length":e,as:t}),new Error("textList and idList not the same length");e.forEach((r,s)=>{this.newWrap("li",{id:t[s]}).text(r)})}else e.forEach(r=>{this.newWrap("li").text(r)});return this}selectContent(e,t,r){if(t||(t=e),e.length!=t.length)throw console.error({"not the same length":e,as:t}),new Error("textList and idList not the same length");if(r){if(e.length!=r.length)throw console.error({"not the same length":e,as:r}),new Error("textList and idList not the same length");e.forEach((s,h)=>{this.newWrap("option",{id:r[h]}).text(s).setVal(t[h])})}else e.forEach((s,h)=>{this.newWrap("option").text(s).setVal(t[h])});return this}makeLabeledInput(e,t,r,s){let h=this.newWrap("div",void 0,r);return t=t===void 0?"input":t,r=r===void 0?"inside":r,new b(h.element,e,t,s)}}class a{constructor(e){l(this,"value");l(this,"subscribers");this.value=e,this.subscribers=[]}getVal(){return this.value}setVal(e){this.value=e,this.notifySubscribers()}addSubscriber(e,t){this.subscribers.push({sub:e,xferFunc:t})}notifySubscribers(){this.subscribers.forEach(e=>{e.sub.handleChange(this.value,e.xferFunc)})}}class f{constructor(e){l(this,"value");this.value=e}bindTo(e,t){return t!=null?e.addSubscriber(this,t):e.addSubscriber(this,r=>{this.value=r}),this}bindToWrapper(e,t,r){r==null&&(r=u=>u);let s={toFeature:"text",bindFeature:t,ofWrapper:e,xferFunc:r};e.addSubscriber(s);let h=e.getText();return s.bindFeature==="style"&&e.getStyle()!=null&&(h=e.getStyle()),s.bindFeature==="value"&&(h=e.getVal()),this.handleChange(h,r),this}handleChange(e,t){this.value=t(e)}}class b extends i{constructor(e,t,r="input",s){super("div",e);l(this,"container");l(this,"label");l(this,"input");this.container=this.element,this.style("display:flex"),this.label=this.newWrap("label").attr("for",t).text("Input"),this.input=this.newWrap(r,{id:t}),s&&(s.contStyle&&this.style(s.contStyle),s.inputStyle&&this.input.style(s.inputStyle),s.lblStyle&&this.label.style(s.lblStyle),s.lbl&&this.label.text(s.lbl),s.placehold&&this.input.placehold(s.placehold),s.default&&this.input.setVal(s.default),s.inputType&&this.input.attr("type",s.inputType),s.stacked&&!s.contStyle&&!s.inputStyle&&(this.style("display:block"),this.input.style("width: 100%; display: block")))}}n.Observer=f,n.WrappedInputLabelPair=b,n.Wrapper=i,n.WrapperlessObservable=a,Object.defineProperty(n,"__esModule",{value:!0}),n[Symbol.toStringTag]="Module"});
//# sourceMappingURL=WrapperLib.umd.js.map
