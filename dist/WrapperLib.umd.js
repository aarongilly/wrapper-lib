var B=Object.defineProperty;var P=(s,l,d)=>l in s?B(s,l,{enumerable:!0,configurable:!0,writable:!0,value:d}):s[l]=d;var h=(s,l,d)=>(P(s,typeof l!="symbol"?l+"":l,d),d);(function(s){typeof define=="function"&&define.amd?define(s):s()})(function(){"use strict";var s="";class l{constructor(e,t,n){h(this,"element");h(this,"subscribers");if(this.subscribers=[],t?this.element=t:this.element=document.createElement(e),this.element.tagName==="INPUT"&&this.onEvent("input",this.notifySubscribers.bind(this)),this.element.tagName==="SELECT"&&this.onEvent("change",this.notifySubscribers.bind(this)),this.element.tagName==="TEXTAREA"&&this.onEvent("input",this.notifySubscribers.bind(this)),n){if(n.id&&(this.element.id=n.id),n.name&&this.element.setAttribute("name",n.name),n.value)if(this.element.hasOwnProperty("value"))this.element.value=n.value;else throw new Error("attempted to set value on a tag that doesn't support that");if(n.text!=null&&(this.element.innerText=n.text),n.html!=null&&(this.element.innerHTML=n.html),n.style&&this.element.setAttribute("style",n.style),n.bind){let r={bindFeature:n.bind.bindFeature,toFeature:n.bind.toFeature,ofWrapper:this,xferFunc:n.bind.xferFunc};n.bind.ofWrapper.addSubscriber(r)}}}static wrap(e,t){return new l(e.tagName,e,t)}newWrap(e,t,n="inside"){let r=new l(e,void 0,t);return n==="inside"&&this.element.appendChild(r.element),n==="after"&&this.element.after(r.element),n==="before"&&this.element.before(r.element),r}bindTo(e,t,n){if(n!=null)e.addSubscriber(this,n);else{if(t==null)throw new Error("No bound feature or xferFunc included.");t=="text"&&e.addSubscriber(this,r=>this.text(r)),t=="value"&&e.addSubscriber(this,r=>this.setVal(r)),t=="style"&&e.addSubscriber(this,r=>this.style(r))}}bindToWrapper(e,t,n,r){let i={bindFeature:t,toFeature:n,ofWrapper:this,xferFunc:r};e.addSubscriber(i);let m=e.getText();return i.bindFeature==="style"&&e.getStyle()!=null&&(m=e.getStyle()),i.bindFeature==="value"&&(m=e.getVal().toString()),this.handleChange(m,i),this}notifySubscribers(){return this.subscribers.forEach(e=>{let t=this.getText();e.bindFeature=="value"&&(t=this.getVal().toString()),e.bindFeature=="style"&&(t=this.getStyle()),e.ofWrapper.handleChange(t,e)}),this}handleChange(e,t){typeof t=="function"?t(e):t.xferFunc?t.xferFunc(e):(t.toFeature==="text"&&this.text(e),t.toFeature==="style"&&this.style(e),t.toFeature==="value"&&this.setVal(e))}addSubscriber(e){return this.subscribers.push(e),this}removeSubscriber(e){return this.subscribers=this.subscribers.filter(t=>t.ofWrapper!=e),this}purgeSubscribers(){return this.subscribers=[],this}text(e){return this.element.innerText=e,this.subscribers.forEach(t=>{t.bindFeature=="text"&&t.ofWrapper.handleChange(e,t)}),this}attr(e,t){return this.element.setAttribute(e,t),this}html(e){return this.element.innerHTML=e,this}style(e,t){let n="";return t&&this.element.getAttribute("style")!=null&&(n=this.element.getAttribute("style").trim(),n.charAt(n.length-1)!=";"&&(n=n+"; ")),this.element.setAttribute("style",n+e),this.subscribers.forEach(r=>{r.bindFeature==="style"&&r.ofWrapper.handleChange(e,r)}),this}name(e){return this.element.setAttribute("name",e),this}placehold(e){return this.element.setAttribute("placeholder",e),this}getAttr(e){return this.element.getAttribute(e)}setAttr(e,t){return this.attr(e,t)}getStyle(){return this.element.getAttribute("style")}setStyle(e){return this.style(e)}getText(){return this.element.innerText}setText(e){return this.text(e)}getVal(){return this.element.tagName=="INPUT"&&this.getAttr("type")=="checkbox"?this.element.checked:this.element.value}setVal(e){return this.element.value=e,this.subscribers.forEach(t=>{t.bindFeature==="value"&&t.ofWrapper.handleChange(e,t)}),this}getData(e){return this.element.dataset[e]}setData(e,t){return this.element.setAttribute("data-"+e,t),this}onEvent(e,t){return this.element.addEventListener(e,n=>t(n)),this}onClick(e){return this.onEvent("click",e),this}onInput(e){return this.onEvent("input",e),this}onChange(e){return this.onEvent("change",e),this}listContent(e,t){if(this.element.tagName!="UL"&&this.element.tagName!="OL")throw console.error({"Not a list container->:":this.element}),new Error('List Content must be appended to a "ul" or "ol"');if(t){if(e.length!=t.length)throw console.error({"not the same length":e,as:t}),new Error("textList and idList not the same length");e.forEach((n,r)=>{this.newWrap("li",{id:t[r]}).text(n)})}else e.forEach(n=>{this.newWrap("li").text(n)});return this}selectContent(e,t,n){if(t||(t=e),e.length!=t.length)throw console.error({"not the same length":e,as:t}),new Error("textList and idList not the same length");if(n){if(e.length!=n.length)throw console.error({"not the same length":e,as:n}),new Error("textList and idList not the same length");e.forEach((r,i)=>{this.newWrap("option",{id:n[i]}).text(r).setVal(t[i])})}else e.forEach((r,i)=>{this.newWrap("option").text(r).setVal(t[i])});return this}makeLabeledInput(e,t,n,r){let i=this.newWrap("div",void 0,n);return t=t===void 0?"input":t,n=n===void 0?"inside":n,new F(i.element,e,t,r)}}class d{constructor(e){h(this,"value");h(this,"subscribers");this.value=e,this.subscribers=[]}getVal(){return this.value}setVal(e){this.value=e,this.notifySubscribers()}addSubscriber(e,t){this.subscribers.push({sub:e,xferFunc:t})}notifySubscribers(){this.subscribers.forEach(e=>{e.sub.handleChange(this.value,e.xferFunc)})}}class x{constructor(e){h(this,"value");this.value=e}bindTo(e,t){return t!=null?e.addSubscriber(this,t):e.addSubscriber(this,n=>{this.value=n}),this}bindToWrapper(e,t,n){n==null&&(n=m=>m);let r={toFeature:"text",bindFeature:t,ofWrapper:e,xferFunc:n};e.addSubscriber(r);let i=e.getText();return r.bindFeature==="style"&&e.getStyle()!=null&&(i=e.getStyle()),r.bindFeature==="value"&&(i=e.getVal()),this.handleChange(i,n),this}handleChange(e,t){this.value=t(e)}}class F extends l{constructor(e,t,n="input",r){super("div",e);h(this,"container");h(this,"label");h(this,"input");this.container=this.element,this.style("display:flex"),this.label=this.newWrap("label").attr("for",t).text("Input"),this.input=this.newWrap(n,{id:t}),r&&(r.contStyle&&this.style(r.contStyle),r.inputStyle&&this.input.style(r.inputStyle),r.lblStyle&&this.label.style(r.lblStyle),r.lbl&&this.label.text(r.lbl),r.placehold&&this.input.placehold(r.placehold),r.default&&this.input.setVal(r.default),r.inputType&&this.input.attr("type",r.inputType),r.stacked&&!r.contStyle&&!r.inputStyle&&(this.style("display:block"),this.input.style("width: 100%; display: block")))}}const p=l.wrap(document.querySelector("#app"));p.newWrap("h1",{text:"Wrapper Library Test Page"});let w=p.newWrap("section",{html:"<h1>Simple Examples</h1>"}),v=w.newWrap("p",{id:"my-paragraph-2",style:"font-size:1.5em"}).text("Last time I checked, the time was: "+new Date().toLocaleTimeString());w.newWrap("button",{text:"Check again"}).onEvent("click",()=>{v.text(v.getText().substring(0,35)+new Date().toLocaleTimeString())});let W=p.newWrap("section").newWrap("h1",{text:"Composite Examples"}).newWrap("div",{style:"display: grid; grid-column-layout: 1fr 1fr"},"after"),S=["Supports Chaining","Concise(er) syntax","Basic data binding","Component-ish things"];W.newWrap("div",{style:"grid-column-start:1"}).newWrap("h2",{text:"Create Lists from Arrays"}).newWrap("ul",void 0,"after").listContent(S),W.newWrap("div",{style:"grid-column-start:2"}).newWrap("h2",{text:"Create Selects from Arrays"}).newWrap("select",void 0,"after").selectContent(S);let b=p.newWrap("section",{html:"<h1>Label-Input Pairs</h1>"});b.newWrap("h2").text("Simple Text Input Example"),b.makeLabeledInput("text-input-example").label.style("margin-right: 0.5em"),b.newWrap("h2").text("Textarea Example"),b.makeLabeledInput("textarea-example","textarea","inside",{stacked:!0}).label.style("margin-right: 0.5em"),b.newWrap("h2").text("Other Types of Inputs");let E=b.newWrap("div").style("display: grid; grid-template-columns: 1fr 1fr"),f=E.makeLabeledInput("check-input","input","inside",{inputType:"checkbox",lbl:"Show Date Example, too?"});f.input.element.checked=!0,f.input.onEvent("click",()=>{f.input.getVal()?T.style("display:flex"):T.style("display:none")});let T=E.makeLabeledInput("date-input",void 0,void 0,{inputType:"date",lbl:"Date Input",lblStyle:"margin-right: 0.5em"}),u=p.newWrap("section",{html:"<h1>Generic Data Binding</h1>"});u.newWrap("h2").text("Bound Wrapper to WrapperlessObservable");let c=new d(5);u.newWrap("p").text(c.getVal().toString()).bindTo(c,"text"),u.newWrap("button").text("Increment").onClick(()=>{c.setVal(c.getVal()+1)}),u.newWrap("h2").text("Observer Watching the Observable From Above");let I=u.newWrap("p").text("Double the number above: 10");new x(c.getVal()).bindTo(c,a=>(I.text("Double the number above: "+a*2),a*2)),u.newWrap("h2").text("Observer of Wrappers");let V=u.newWrap("input").placehold("Enter some text"),A=u.newWrap("p").text("Input value: ");new x("whatever").bindToWrapper(V,"value",a=>(A.text("Input value: "+a),a));let o=p.newWrap("section",{html:"<h1>Inter-Wrapper Binding Example</h1>"});o.newWrap("h2").text("Bound Select, with Binding Breaker Demo");let y=o.newWrap("select").selectContent(["1","2","3"],["You picked one","You picked two","You picked three"]),g=o.newWrap("p").bindToWrapper(y,"value","text");o.newWrap("button",{text:"Break Binding"}).onEvent("click",()=>{y.removeSubscriber(g),g.text("Binding broken, this will no longer update.")}).style("margin-right: 0.5em"),o.newWrap("button",{text:"Re-bind"}).onEvent("click",()=>g.bindToWrapper(y,"value","text")),o.newWrap("h2",{text:"Binding Text & Style (via xferFunc)"});let k=o.newWrap("p",{text:"Enter some text below and watch me change..."}),C=o.newWrap("input").setVal("Enter a Color name!").placehold("Type a color name...");k.bindToWrapper(C,"value","text").bindToWrapper(C,"value","style",a=>{k.style("color:"+a)})});
//# sourceMappingURL=WrapperLib.umd.js.map
